"""
–°–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å AI —á–∞—Ç–æ–º
"""
from datetime import datetime
from typing import List, Optional
from openai import AsyncOpenAI
from app.core.config import settings
from app.schemas.chat import ChatMessage
from app.core.logging import get_logger

logger = get_logger()

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è OpenAI –∫–ª–∏–µ–Ω—Ç–∞
client = AsyncOpenAI(api_key=settings.OPENAI_API_KEY) if settings.OPENAI_API_KEY else None

# –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
SYSTEM_PROMPT = """–¢—ã - –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ —Å–µ—Ä–≤–∏—Å–∞ Ertis Service –¥–ª—è –≥–æ—Ä–æ–¥–∞ –ü–∞–≤–ª–æ–¥–∞—Ä, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω.
Ertis Service - —ç—Ç–æ —Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–≥–∞–µ—Ç –∂–∏—Ç–µ–ª—è–º –≥–æ—Ä–æ–¥–∞ —Ä–µ—à–∞—Ç—å –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã: –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ —Ä–µ–º–æ–Ω—Ç, –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ñ–ö–•.

## –¢–≤–æ–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. –ü–æ–º–æ–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–µ—Ä–≤–∏—Å–æ–º
2. –û–±—ä—è—Å–Ω—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∞—á–∏ –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞—è–≤–æ–∫
3. –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –æ —Ä–∞–±–æ—Ç–µ –ñ–ö–• –∏ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö —Å–ª—É–∂–±–∞—Ö
4. –î–∞–≤–∞—Ç—å —Å–æ–≤–µ—Ç—ã –ø–æ —Ä–µ—à–µ–Ω–∏—é –±—ã—Ç–æ–≤—ã—Ö –ø—Ä–æ–±–ª–µ–º
5. –ò–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ —Å—Ä–æ–∫–∞—Ö –∏ –ø–æ—Ä—è–¥–∫–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫

## –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–±–ª–µ–º, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º:
- üíß **–í–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ**: –Ω–µ—Ç –≤–æ–¥—ã, –ø—Ä–æ—Ç–µ—á–∫–∏, –ø—Ä–æ—Ä—ã–≤—ã —Ç—Ä—É–±, –≥—Ä—è–∑–Ω–∞—è –≤–æ–¥–∞, –Ω–∏–∑–∫–æ–µ –¥–∞–≤–ª–µ–Ω–∏–µ, –∫–∞–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- ‚ö° **–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ**: –Ω–µ—Ç —Å–≤–µ—Ç–∞, –æ–±–æ—Ä–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–∞, –∏—Å–∫—Ä—è—â–∏–µ —Ä–æ–∑–µ—Ç–∫–∏, –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Å–≤–µ—â–µ–Ω–∏–µ–º
- üõ£Ô∏è **–î–æ—Ä–æ–∂–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: —è–º—ã –Ω–∞ –¥–æ—Ä–æ–≥–∞—Ö, —Ç—Ä–µ—â–∏–Ω—ã –≤ –∞—Å—Ñ–∞–ª—å—Ç–µ, —Ä–∞–∑—Ä—É—à–µ–Ω–Ω—ã–µ –±–æ—Ä–¥—é—Ä—ã, —Å–ª–æ–º–∞–Ω–Ω—ã–µ –∑–Ω–∞–∫–∏
- üóëÔ∏è **–í—ã–≤–æ–∑ –º—É—Å–æ—Ä–∞**: –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –Ω–µ –≤—ã–≤–æ–∑—è—Ç –º—É—Å–æ—Ä, —Å—Ç–∏—Ö–∏–π–Ω—ã–µ —Å–≤–∞–ª–∫–∏
- üßπ **–£–±–æ—Ä–∫–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏**: –Ω–µ —É–±–∏—Ä–∞—é—Ç –¥–≤–æ—Ä, —Å–Ω–µ–≥, –ª–∏—Å—Ç—å—è, –≥—Ä—è–∑—å –≤ –ø–æ–¥—ä–µ–∑–¥–µ
- üè¢ **–õ–∏—Ñ—Ç**: –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏—Ñ—Ç, –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ, —Å—Ç—Ä–∞–Ω–Ω—ã–µ –∑–≤—É–∫–∏, –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –¥–≤–µ—Ä–∏
- üå≥ **–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**: —Å–ª–æ–º–∞–Ω–Ω—ã–µ —Å–∫–∞–º–µ–π–∫–∏, –¥–µ—Ç—Å–∫–∏–µ –ø–ª–æ—â–∞–¥–∫–∏, –Ω–µ—Ç –æ—Å–≤–µ—â–µ–Ω–∏—è –≤–æ –¥–≤–æ—Ä–µ, —Å—É—Ö–∏–µ –¥–µ—Ä–µ–≤—å—è
- üî• **–û—Ç–æ–ø–ª–µ–Ω–∏–µ**: —Ö–æ–ª–æ–¥–Ω—ã–µ –±–∞—Ç–∞—Ä–µ–∏, –Ω–µ—Ç –æ—Ç–æ–ø–ª–µ–Ω–∏—è, –ø–µ—Ä–µ–≥—Ä–µ–≤, —à—É–º –≤ –±–∞—Ç–∞—Ä–µ—è—Ö
- üö™ **–ü–æ–¥—ä–µ–∑–¥**: –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Å–≤–µ—â–µ–Ω–∏–µ, —Å–ª–æ–º–∞–Ω –¥–æ–º–æ—Ñ–æ–Ω, —Ä–∞–∑–±–∏—Ç—ã–µ –æ–∫–Ω–∞, –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–º–∫–∞–º–∏

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–≤–∏—Å:
1. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏**: –°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—É, –æ–ø–∏—à–∏—Ç–µ –µ—ë –∏ —É–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å
2. **AI-–∞–Ω–∞–ª–∏–∑**: –ù–∞—à –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–±–µ—Ä—ë—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
4. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –í—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞
5. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**: –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –≤—ã —Å–º–æ–∂–µ—Ç–µ –æ—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ

## –°—Ç–∞—Ç—É—Å—ã –∑–∞—è–≤–æ–∫:
- üü° **–û–∂–∏–¥–∞–µ—Ç** - –∑–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ –∏ –∂–¥—ë—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
- üü† **–ù–∞–∑–Ω–∞—á–µ–Ω–∞** - —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
- üîµ **–í —Ä–∞–±–æ—Ç–µ** - —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥ –ø—Ä–æ–±–ª–µ–º–æ–π
- üü¢ **–í—ã–ø–æ–ª–Ω–µ–Ω–∞** - –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞
- ‚ö´ **–ó–∞–∫—Ä—ã—Ç–∞** - –∑–∞—è–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∞

## –°—Ä–æ–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏: –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤
- –°—Ä–æ—á–Ω—ã–µ –∑–∞—è–≤–∫–∏ (–∞–≤–∞—Ä–∏–∏): 1-4 —á–∞—Å–∞
- –û–±—ã—á–Ω—ã–µ –∑–∞—è–≤–∫–∏: 1-3 —Ä–∞–±–æ—á–∏—Ö –¥–Ω—è
- –°–ª–æ–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã: –¥–æ 7 –¥–Ω–µ–π

## –í–∞–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- –î–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏ –Ω—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –§–æ—Ç–æ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–µ–µ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
- –¢–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å —É—Å–∫–æ—Ä—è–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É
- –ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–∞—è–≤–∫–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ
- –û—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ–º–æ–≥–∞–µ—Ç —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (–ü–∞–≤–ª–æ–¥–∞—Ä):
- –ê–≤–∞—Ä–∏–π–Ω–∞—è —Å–ª—É–∂–±–∞ –ñ–ö–•: 32-00-01
- –í–æ–¥–æ–∫–∞–Ω–∞–ª: 55-55-55
- –≠–ª–µ–∫—Ç—Ä–æ—Å–µ—Ç–∏: 60-60-60
- –°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å: 103
- –ü–æ–∂–∞—Ä–Ω–∞—è: 101

## –ü—Ä–∞–≤–∏–ª–∞ –æ–±—â–µ–Ω–∏—è:
- –û—Ç–≤–µ—á–∞–π –∫—Ä–∞—Ç–∫–æ, –Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π —ç–º–æ–¥–∑–∏ –≥–¥–µ —É–º–µ—Å—Ç–Ω–æ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏
- –ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å —Ç–æ—á–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ - –ø—Ä–µ–¥–ª–æ–∂–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É
- –ë—É–¥—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º –∏ –≤–µ–∂–ª–∏–≤—ã–º
- –û—Ç–≤–µ—á–∞–π –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º
- –ü—Ä–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–µ–¥–ª–∞–≥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞: """ + datetime.now().strftime("%d.%m.%Y")


async def get_chat_response(
    user_message: str,
    history: Optional[List[ChatMessage]] = None
) -> str:
    """
    –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç AI –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞

    Args:
        user_message: –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        history: –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

    Returns:
        –û—Ç–≤–µ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞
    """
    # Fallback –æ—Ç–≤–µ—Ç –µ—Å–ª–∏ OpenAI API –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
    if not client or not settings.OPENAI_API_KEY:
        logger.warning("OpenAI API key –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è fallback")
        return get_fallback_response(user_message)

    try:
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è OpenAI
        messages = [
            {"role": "system", "content": SYSTEM_PROMPT}
        ]

        # –î–æ–±–∞–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –µ—Å—Ç—å
        if history:
            for msg in history[-10:]:  # –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
                messages.append({
                    "role": msg.role,
                    "content": msg.content
                })

        # –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        messages.append({
            "role": "user",
            "content": user_message
        })

        # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –æ—Ç OpenAI
        response = await client.chat.completions.create(
            model="gpt-4o-mini",
            messages=messages,
            max_tokens=800,
            temperature=0.7
        )

        assistant_message = response.choices[0].message.content
        logger.info(f"AI –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏—è: {user_message[:50]}...")

        return assistant_message

    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞ –æ—Ç OpenAI: {e}")
        return get_fallback_response(user_message)


def get_fallback_response(user_message: str) -> str:
    """
    –ü–æ–ª—É—á–∏—Ç—å fallback –æ—Ç–≤–µ—Ç –±–µ–∑ AI
    """
    msg = user_message.lower()

    # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
    if any(word in msg for word in ["–ø—Ä–∏–≤–µ—Ç", "–∑–¥—Ä–∞–≤—Å—Ç–≤", "—Å–∞–ª–µ–º", "—Å”ô–ª–µ–º", "hello", "hi"]):
        return "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã –Ø –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ Ertis Service. –ü–æ–º–æ–≥—É –≤–∞–º —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –æ –ø–æ–¥–∞—á–µ –∑–∞—è–≤–æ–∫, –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ —Ä–∞–±–æ—Ç–µ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö —Å–ª—É–∂–±. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"

    # –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
    if any(word in msg for word in ["—Å–ø–∞—Å–∏–±–æ", "–±–ª–∞–≥–æ–¥–∞—Ä", "—Ä–∞—Ö–º–µ—Ç", "thanks"]):
        return "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! üòä –†–∞–¥ –±—ã–ª –ø–æ–º–æ—á—å. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –µ—â—ë –≤–æ–ø—Ä–æ—Å—ã - –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å!"

    # –ó–∞—è–≤–∫–∏
    if any(word in msg for word in ["–∑–∞—è–≤–∫", "—Å–æ–∑–¥–∞—Ç—å", "–ø–æ–¥–∞—Ç—å", "–æ—Å—Ç–∞–≤–∏—Ç—å", "–ø—Ä–æ–±–ª–µ–º"]):
        return """üìù **–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É:**
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É" –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
2. –í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø—Ä–æ–±–ª–µ–º—ã
3. –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ç–æ –∏ –¥–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ
4. –£–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å
5. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞—è–≤–∫—É

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ AI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ –Ω–∞–∑–Ω–∞—á–∏—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞! ü§ñ"""

    # –°—Ç–∞—Ç—É—Å—ã
    if any(word in msg for word in ["—Å—Ç–∞—Ç—É—Å", "–æ—Ç—Å–ª–µ–¥", "–≥–¥–µ –º–æ—è", "–∫–∞–∫ —É–∑–Ω–∞—Ç—å"]):
        return """üìä **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞—è–≤–æ–∫:**

–ó–∞–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ò—Å—Ç–æ—Ä–∏—è –∑–∞—è–≤–æ–∫" –≤ –º–µ–Ω—é. –¢–∞–º –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –≤–∞—à–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏:
- üü° –û–∂–∏–¥–∞–µ—Ç - –Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏
- üü† –ù–∞–∑–Ω–∞—á–µ–Ω–∞ - —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω
- üîµ –í —Ä–∞–±–æ—Ç–µ - –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- üü¢ –í—ã–ø–æ–ª–Ω–µ–Ω–∞ - –≥–æ—Ç–æ–≤–æ!

–¢–∞–∫–∂–µ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞."""

    # –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
    if any(word in msg for word in ["–∫–∞—Ç–µ–≥–æ—Ä", "–∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º", "—Å —á–µ–º –ø–æ–º–æ–≥"]):
        return """üè† **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–±–ª–µ–º:**

‚Ä¢ üíß –í–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ (–ø—Ä–æ—Ç–µ—á–∫–∏, –Ω–µ—Ç –≤–æ–¥—ã)
‚Ä¢ ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ (–Ω–µ—Ç —Å–≤–µ—Ç–∞, –ø—Ä–æ–≤–æ–¥–∞)
‚Ä¢ üõ£Ô∏è –î–æ—Ä–æ–≥–∏ (—è–º—ã, –±–æ—Ä–¥—é—Ä—ã)
‚Ä¢ üóëÔ∏è –ú—É—Å–æ—Ä (–≤—ã–≤–æ–∑, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã)
‚Ä¢ üßπ –£–±–æ—Ä–∫–∞ (–¥–≤–æ—Ä, –ø–æ–¥—ä–µ–∑–¥, —Å–Ω–µ–≥)
‚Ä¢ üè¢ –õ–∏—Ñ—Ç (–ø–æ–ª–æ–º–∫–∏, –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ)
‚Ä¢ üå≥ –ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (–ø–ª–æ—â–∞–¥–∫–∏, –æ—Å–≤–µ—â–µ–Ω–∏–µ)
‚Ä¢ üî• –û—Ç–æ–ø–ª–µ–Ω–∏–µ (–±–∞—Ç–∞—Ä–µ–∏)
‚Ä¢ üö™ –ü–æ–¥—ä–µ–∑–¥ (–¥–æ–º–æ—Ñ–æ–Ω, –∑–∞–º–∫–∏)"""

    # –°—Ä–æ–∫–∏
    if any(word in msg for word in ["—Å–∫–æ–ª—å–∫–æ", "–≤—Ä–µ–º—è", "–±—ã—Å—Ç—Ä", "–¥–æ–ª–≥–æ", "–∫–æ–≥–¥–∞", "—Å—Ä–æ–∫"]):
        return """‚è±Ô∏è **–°—Ä–æ–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**

‚Ä¢ –°—Ä–æ—á–Ω—ã–µ –∞–≤–∞—Ä–∏–∏: 1-4 —á–∞—Å–∞
‚Ä¢ –û–±—ã—á–Ω—ã–µ –∑–∞—è–≤–∫–∏: 1-3 –¥–Ω—è
‚Ä¢ –°–ª–æ–∂–Ω—ã–µ —Ä–∞–±–æ—Ç—ã: –¥–æ 7 –¥–Ω–µ–π

–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ - –º–µ–Ω–µ–µ 24 —á–∞—Å–æ–≤. AI-—Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ —Ñ–æ—Ç–æ –∏ –æ–ø–∏—Å–∞–Ω–∏—é."""

    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    if any(word in msg for word in ["—Ä–µ–≥–∏—Å—Ç—Ä", "–∞–∫–∫–∞—É–Ω—Ç", "–≤–æ–π—Ç–∏", "–≤—Ö–æ–¥", "–ª–æ–≥–∏–Ω"]):
        return """üë§ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**

1. –ù–∞–∂–º–∏—Ç–µ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" –≤ –º–µ–Ω—é
2. –í–≤–µ–¥–∏—Ç–µ email –∏ –ø—Ä–∏–¥—É–º–∞–π—Ç–µ –ø–∞—Ä–æ–ª—å
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é
4. –ì–æ—Ç–æ–≤–æ! –ú–æ–∂–µ—Ç–µ –ø–æ–¥–∞–≤–∞—Ç—å –∑–∞—è–≤–∫–∏

–£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –ù–∞–∂–º–∏—Ç–µ "–í—Ö–æ–¥" –∏ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ."""

    # –ö–∞—Ä—Ç–∞
    if any(word in msg for word in ["–∫–∞—Ä—Ç", "–≥–¥–µ –ø—Ä–æ–±–ª", "–≥–æ—Ä–æ–¥"]):
        return """üó∫Ô∏è **–ö–∞—Ä—Ç–∞ –ø—Ä–æ–±–ª–µ–º:**

–í —Ä–∞–∑–¥–µ–ª–µ "–ö–∞—Ä—Ç–∞" –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞—è–≤–∫–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–µ –ü–∞–≤–ª–æ–¥–∞—Ä–∞. 

–ö–∞–∂–¥–∞—è –º–µ—Ç–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø –ø—Ä–æ–±–ª–µ–º—ã –∏ –µ—ë —Å—Ç–∞—Ç—É—Å. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤–∏–¥–µ—Ç—å, –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞—é—Ç—Å—è –≤ –≤–∞—à–µ–º —Ä–∞–π–æ–Ω–µ."""

    # –í–æ–¥–∞
    if any(word in msg for word in ["–≤–æ–¥", "—Ç–µ—á—å", "—Ç—Ä—É–±", "–∫—Ä–∞–Ω", "–∫–∞–Ω–∞–ª–∏–∑"]):
        return """üíß **–ü—Ä–æ–±–ª–µ–º—ã —Å –≤–æ–¥–æ–π?**

–ï—Å–ª–∏ –Ω–µ—Ç –≤–æ–¥—ã –∏–ª–∏ –ø—Ä–æ—Ç–µ—á–∫–∞ - —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–í–æ–¥–æ—Å–Ω–∞–±–∂–µ–Ω–∏–µ".

‚ö†Ô∏è –ü—Ä–∏ —Å–∏–ª—å–Ω–æ–º –ø—Ä–æ—Ä—ã–≤–µ —Ç—Ä—É–±—ã —Å—Ä–æ—á–Ω–æ –∑–≤–æ–Ω–∏—Ç–µ –≤ –∞–≤–∞—Ä–∏–π–Ω—É—é —Å–ª—É–∂–±—É: **32-00-01**

–î–ª—è –∑–∞—è–≤–∫–∏ —Å—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏ —É–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å."""

    # –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ
    if any(word in msg for word in ["—Å–≤–µ—Ç", "—ç–ª–µ–∫—Ç—Ä", "—Ä–æ–∑–µ—Ç–∫", "–ø—Ä–æ–≤–æ–¥", "–ª–∞–º–ø–æ—á–∫"]):
        return """‚ö° **–ü—Ä–æ–±–ª–µ–º—ã —Å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ–º?**

–°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ".

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ù–µ —Ç—Ä–æ–≥–∞–π—Ç–µ –æ–≥–æ–ª—ë–Ω–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–∞! –ü—Ä–∏ –∏—Å–∫—Ä–µ–Ω–∏–∏ –∏–ª–∏ –∑–∞–ø–∞—Ö–µ –≥–∞—Ä–∏ - –æ—Ç–∫–ª—é—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç –∏ –∑–≤–æ–Ω–∏—Ç–µ **60-60-60**

–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –∏ —É–∫–∞–∂–∏—Ç–µ, –≥–¥–µ –∏–º–µ–Ω–Ω–æ –Ω–µ—Ç —Å–≤–µ—Ç–∞."""

    # –û—Ç–æ–ø–ª–µ–Ω–∏–µ
    if any(word in msg for word in ["–æ—Ç–æ–ø–ª", "–±–∞—Ç–∞—Ä–µ", "—Ö–æ–ª–æ–¥–Ω", "—Ç–µ–ø–ª"]):
        return """üî• **–ü—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–ø–ª–µ–Ω–∏–µ–º?**

–°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–û—Ç–æ–ø–ª–µ–Ω–∏–µ". –û–ø–∏—à–∏—Ç–µ:
- –ö–∞–∫–∏–µ –±–∞—Ç–∞—Ä–µ–∏ –Ω–µ –≥—Ä–µ—é—Ç
- –ö–æ–≥–¥–∞ –Ω–∞—á–∞–ª–∏—Å—å –ø—Ä–æ–±–ª–µ–º—ã
- –ï—Å—Ç—å –ª–∏ –æ—Ç–æ–ø–ª–µ–Ω–∏–µ —É —Å–æ—Å–µ–¥–µ–π

–í –æ—Ç–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ–∑–æ–Ω —Ç–∞–∫–∏–µ –∑–∞—è–≤–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ."""

    # –ú—É—Å–æ—Ä
    if any(word in msg for word in ["–º—É—Å–æ—Ä", "–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä", "–≤—ã–≤–æ–∑", "—Å–≤–∞–ª–∫"]):
        return """üóëÔ∏è **–ü—Ä–æ–±–ª–µ–º—ã —Å –º—É—Å–æ—Ä–æ–º?**

–°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–í—ã–≤–æ–∑ –º—É—Å–æ—Ä–∞". 

–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–ª–∏ —Å—Ç–∏—Ö–∏–π–Ω—É—é —Å–≤–∞–ª–∫—É. –£–∫–∞–∂–∏—Ç–µ —Ç–æ—á–Ω—ã–π –∞–¥—Ä–µ—Å - —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –±—ã—Å—Ç—Ä–µ–µ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É."""

    # –õ–∏—Ñ—Ç
    if any(word in msg for word in ["–ª–∏—Ñ—Ç", "–∑–∞—Å—Ç—Ä—è–ª"]):
        return """üè¢ **–ü—Ä–æ–±–ª–µ–º–∞ —Å –ª–∏—Ñ—Ç–æ–º?**

–°–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–õ–∏—Ñ—Ç".

‚ö†Ô∏è **–ï—Å–ª–∏ –∑–∞—Å—Ç—Ä—è–ª–∏ –≤ –ª–∏—Ñ—Ç–µ:**
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã–∑–æ–≤–∞ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
2. –ü–æ–∑–≤–æ–Ω–∏—Ç–µ –ø–æ –Ω–æ–º–µ—Ä—É –≤ –∫–∞–±–∏–Ω–µ
3. –ù–µ –ø—ã—Ç–∞–π—Ç–µ—Å—å –≤—ã–±—Ä–∞—Ç—å—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

–õ–∏—Ñ—Ç–æ–≤—ã–µ –∑–∞—è–≤–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ —Å—Ä–æ—á–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ."""

    # –ê–≤–∞—Ä–∏–π–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏
    if any(word in msg for word in ["–∞–≤–∞—Ä", "—Å—Ä–æ—á–Ω", "—ç–∫—Å—Ç—Ä–µ–Ω", "–ø–æ–º–æ–≥–∏—Ç–µ"]):
        return """üö® **–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –ü–∞–≤–ª–æ–¥–∞—Ä–∞:**

‚Ä¢ –ê–≤–∞—Ä–∏–π–Ω–∞—è —Å–ª—É–∂–±–∞ –ñ–ö–•: **32-00-01**
‚Ä¢ –í–æ–¥–æ–∫–∞–Ω–∞–ª: **55-55-55**
‚Ä¢ –≠–ª–µ–∫—Ç—Ä–æ—Å–µ—Ç–∏: **60-60-60**
‚Ä¢ –°–∫–æ—Ä–∞—è –ø–æ–º–æ—â—å: **103**
‚Ä¢ –ü–æ–∂–∞—Ä–Ω–∞—è: **101**
‚Ä¢ –ü–æ–ª–∏—Ü–∏—è: **102**

–ü—Ä–∏ –∞–≤–∞—Ä–∏–∏ —Å–Ω–∞—á–∞–ª–∞ –∑–≤–æ–Ω–∏—Ç–µ –≤ —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã, –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è."""

    # –û—Ü–µ–Ω–∫–∞
    if any(word in msg for word in ["–æ—Ü–µ–Ω", "—Ä–µ–π—Ç–∏–Ω–≥", "–æ—Ç–∑—ã–≤"]):
        return """‚≠ê **–û—Ü–µ–Ω–∫–∞ —Ä–∞–±–æ—Ç—ã:**

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ –≤—ã –º–æ–∂–µ—Ç–µ –æ—Ü–µ–Ω–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ 5-–±–∞–ª–ª—å–Ω–æ–π —à–∫–∞–ª–µ.

–í–∞—à–∏ –æ—Ü–µ–Ω–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç:
- –£–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è
- –ü–æ–æ—â—Ä–∏—Ç—å —Ö–æ—Ä–æ—à–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –í—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏

–ß–µ—Å—Ç–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞!"""

    # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
    return """ü§î –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–ø—Ä–æ—Å! –Ø –ø–æ–º–æ–≥—É –≤–∞–º —Å:

‚Ä¢ üìù –ü–æ–¥–∞—á–µ–π –∑–∞—è–≤–æ–∫ –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
‚Ä¢ üìä –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞ –∑–∞—è–≤–æ–∫
‚Ä¢ üó∫Ô∏è –†–∞–±–æ—Ç–æ–π —Å –∫–∞—Ä—Ç–æ–π –ø—Ä–æ–±–ª–µ–º
‚Ä¢ ‚ùì –í–æ–ø—Ä–æ—Å–∞–º–∏ –æ —Ä–∞–±–æ—Ç–µ –ñ–ö–•

–ù–∞–ø–∏—à–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ, —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∑–∞—è–≤–∫—É —á–µ—Ä–µ–∑ –º–µ–Ω—é!"""
